{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shoko\\\\src\\\\URE3-Next.js\\\\ure-nextjs\\\\pages\\\\properties.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport NavBar from './NavBar';\nimport MetaHead from './Head';\nimport Footer from \"./Footer\";\nimport Link from 'next/link';\nimport queryAsync from '../mysql';\nimport { useState, useEffect } from 'react';\nimport \"../style.css\";\nimport jwt from 'jsonwebtoken';\n\nasync function getProperties() {\n  let dbdata = await queryAsync(`\n  SELECT property.id, property.address, property.image_path, property.inspection, \n  property.bed, property.shower, property.car, agents.name, agents.agents_photo \n  FROM property \n  JOIN agents ON property.agent_id = agents.id;\n  `);\n  return JSON.parse(JSON.stringify(dbdata));\n}\n\nfunction checkCookies(context) {\n  const regex = /logInCookie\\=([A-Za-z0-9\\.\\_\\-]+)/;\n  let decoded;\n  let agentLoggedIn = false;\n\n  try {\n    let cookie = context.req.headers.cookie;\n    let token = cookie.match(regex)[1];\n    decoded = jwt.verify(token, 'ShokoDidIt');\n\n    if (decoded.role === \"agent\") {\n      agentLoggedIn = true;\n      return agentLoggedIn;\n    } else {\n      return agentLoggedIn;\n    }\n  } catch {\n    return agentLoggedIn;\n  }\n}\n\nexport async function getServerSideProps(context) {\n  let rows = await getProperties();\n  let loggedIn = checkCookies(context);\n  return {\n    props: {\n      rows,\n      loggedIn\n    }\n  };\n}\n;\n\nfunction Index({\n  rows,\n  loggedIn\n}) {\n  let addForm = !loggedIn ? null : __jsx(React.Fragment, null, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, \"Add more property\"), __jsx(\"form\", {\n    action: \"/moreproperty\",\n    method: \"POST\",\n    id: \"moreProperty\",\n    onSubmit: handleAddProperty,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"marginTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlfo: \"address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"Address of Property\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }), __jsx(\"input\", {\n    id: \"address\",\n    type: \"text\",\n    name: \"address\",\n    placeholder: \"Property Address\",\n    size: \"36\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"marginTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    for: \"inspection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, \"Inspection Date\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }), __jsx(\"input\", {\n    id: \"inspection\",\n    type: \"text\",\n    name: \"inspection\",\n    placeholder: \"Open xx/xx/ xx:xxam/pm\",\n    size: \"36\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"marginTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    for: \"image_path\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, \"Tytle of the Image File\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }), __jsx(\"input\", {\n    id: \"image_path\",\n    type: \"text\",\n    name: \"image_path\",\n    placeholder: \"example.jpg\",\n    size: \"36\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"marginTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    for: \"agentName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Agent's name\"), __jsx(\"input\", {\n    id: \"agentName\",\n    type: \"text\",\n    name: \"agentName\",\n    placeholder: \"Full name\",\n    size: \"36\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"marginTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, \"The number of Bed Rooms\"), __jsx(\"div\", {\n    id: \"radio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, \"1\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"bed\",\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), \"2\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"bed\",\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }), \"3\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"bed\",\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }), \"4\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"bed\",\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }), \"5\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"bed\",\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    className: \"marginTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, \"The number of Shower Rooms\"), __jsx(\"div\", {\n    id: \"radio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, \"1\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"shower\",\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }), \"2\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"shower\",\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }), \"3\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"shower\",\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }), \"4\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"shower\",\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }), \"5\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"shower\",\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    className: \"marginTop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, \"The number of Car Parking\"), __jsx(\"div\", {\n    id: \"radio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, \"1\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"car\",\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }), \"2\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"car\",\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }), \"3\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"car\",\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }), \"4\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"car\",\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }), \"5\", __jsx(\"input\", {\n    type: \"radio\",\n    name: \"car\",\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }))), __jsx(\"button\", {\n    type: \"submit\",\n    id: \"addPropertyBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, \"OK\")));\n\n  async function handleAddProperty(e) {\n    e.preventDefault();\n    let response = await fetch('http://localhost:3000/api/moreproperties', {});\n  }\n\n  let rowsMap = rows.map(row => __jsx(\"div\", {\n    className: \"imgs\",\n    key: row.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 5\n    }\n  }, __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    className: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, \"Ultimo Real Estate\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }), __jsx(\"a\", {\n    target: \"_blank\",\n    href: \"./gallery?id=\" + row.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }, __jsx(\"img\", {\n    src: \"static/\" + row.image_path,\n    alt: \"Home1\",\n    id: \"cardImg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  })), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }), __jsx(\"h5\", {\n    className: \"obi\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, row.name, __jsx(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    src: \"static/\" + row.agents_photo,\n    width: \"70px;\",\n    height: \"70px;\",\n    style: {\n      borderRadius: '50%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }))), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }), __jsx(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, row.address), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }\n  }), __jsx(\"p\", {\n    className: \"icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }, __jsx(\"img\", {\n    src: \"static/bed.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }), row.bed, __jsx(\"img\", {\n    src: \"static/shower.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }), row.shower, __jsx(\"img\", {\n    src: \"static/car.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }), row.bed), __jsx(\"p\", {\n    className: \"inspe\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, __jsx(\"img\", {\n    src: \"static/planner.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }), \" Inspection : \", row.inspection)));\n  return __jsx(React.Fragment, null, __jsx(MetaHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }\n  }, __jsx(\"header\", {\n    className: \"elseHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 15\n    }\n  }, __jsx(\"img\", {\n    src: \"../static/estate-logo.svg\",\n    width: \"300\",\n    height: \"100\",\n    alt: \"Ultimo Real Estate, Sydney, Australia\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  })))), __jsx(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  })), __jsx(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"titleOfPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, \"Property of the Week\")), __jsx(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"grid-container-pro\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, rowsMap)), __jsx(\"div\", {\n    className: \"addProperty\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 11\n    }\n  }, addForm)), __jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }\n  })));\n}\n\n;\nexport default Index;","map":{"version":3,"sources":["C:/Users/shoko/src/URE3-Next.js/ure-nextjs/pages/properties.js"],"names":["NavBar","MetaHead","Footer","Link","queryAsync","useState","useEffect","jwt","getProperties","dbdata","JSON","parse","stringify","checkCookies","context","regex","decoded","agentLoggedIn","cookie","req","headers","token","match","verify","role","getServerSideProps","rows","loggedIn","props","Index","addForm","handleAddProperty","e","preventDefault","response","fetch","rowsMap","map","row","id","image_path","name","agents_photo","borderRadius","address","bed","shower","inspection"],"mappings":"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","sourcesContent":["import NavBar from './NavBar';\r\nimport MetaHead from './Head';\r\nimport Footer from \"./Footer\";\r\nimport Link from 'next/link';\r\nimport queryAsync from '../mysql';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport \"../style.css\"\r\n\r\nimport jwt from 'jsonwebtoken';\r\n\r\n\r\nasync function getProperties() {\r\n  let dbdata = await queryAsync(`\r\n  SELECT property.id, property.address, property.image_path, property.inspection, \r\n  property.bed, property.shower, property.car, agents.name, agents.agents_photo \r\n  FROM property \r\n  JOIN agents ON property.agent_id = agents.id;\r\n  `);\r\n\r\n  return JSON.parse(JSON.stringify(dbdata));\r\n}\r\n\r\nfunction checkCookies(context) {\r\n  const regex = /logInCookie\\=([A-Za-z0-9\\.\\_\\-]+)/;\r\n  let decoded;\r\n  let agentLoggedIn = false;\r\n\r\n  try {\r\n    let cookie = context.req.headers.cookie;\r\n    let token = cookie.match(regex)[1];\r\n    decoded = jwt.verify(token, 'ShokoDidIt');\r\n    if(decoded.role === \"agent\") {\r\n      agentLoggedIn = true;\r\n      return agentLoggedIn;\r\n    }else{\r\n      return agentLoggedIn;\r\n    }\r\n  } catch {\r\n    return agentLoggedIn;\r\n  }\r\n}\r\n\r\nexport async function getServerSideProps(context) {\r\n\r\n  let rows = await getProperties();\r\n  let loggedIn = checkCookies(context);\r\n\r\n  return {\r\n    props: {\r\n      rows,\r\n      loggedIn\r\n    },\r\n  }\r\n};\r\n\r\n\r\nfunction Index({ rows, loggedIn }) {\r\n\r\n  let addForm = !loggedIn ? null :\r\n  <>\r\n    <h2 >Add more property</h2>\r\n      <form\r\n        action=\"/moreproperty\"\r\n        method=\"POST\"\r\n        id=\"moreProperty\"\r\n        onSubmit = {handleAddProperty}\r\n      >\r\n        <div className=\"marginTop\">\r\n          <label htmlfo=\"address\">Address of Property</label>\r\n          <br />\r\n          <input\r\n            id=\"address\"\r\n            type=\"text\"\r\n            name=\"address\"\r\n            placeholder=\"Property Address\"\r\n            size=\"36\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"marginTop\">\r\n          <label for=\"inspection\">Inspection Date</label>\r\n          <br />\r\n          <input\r\n            id=\"inspection\"\r\n            type=\"text\"\r\n            name=\"inspection\"\r\n            placeholder=\"Open xx/xx/ xx:xxam/pm\"\r\n            size=\"36\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"marginTop\">\r\n          <label for=\"image_path\">Tytle of the Image File</label>\r\n          <br />\r\n          <input\r\n            id=\"image_path\"\r\n            type=\"text\"\r\n            name=\"image_path\"\r\n            placeholder=\"example.jpg\"\r\n            size=\"36\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"marginTop\">\r\n          <label for=\"agentName\">Agent's name</label>\r\n          <input\r\n            id=\"agentName\"\r\n            type=\"text\"\r\n            name=\"agentName\"\r\n            placeholder=\"Full name\"\r\n            size=\"36\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"marginTop\">\r\n          <label >The number of Bed Rooms</label>\r\n          <div id=\"radio\">\r\n            1\r\n            <input type=\"radio\" name=\"bed\" value=\"1\" />\r\n            2\r\n            <input type=\"radio\" name=\"bed\" value=\"2\" />\r\n            3\r\n            <input type=\"radio\" name=\"bed\" value=\"3\" />\r\n            4\r\n            <input type=\"radio\" name=\"bed\" value=\"4\" />\r\n            5\r\n            <input type=\"radio\" name=\"bed\" value=\"5\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"marginTop\">\r\n          <label >The number of Shower Rooms</label>\r\n          <div id=\"radio\">\r\n            1\r\n            <input type=\"radio\" name=\"shower\" value=\"1\" />\r\n            2\r\n            <input type=\"radio\" name=\"shower\" value=\"2\" />\r\n            3\r\n            <input type=\"radio\" name=\"shower\" value=\"3\" />\r\n            4\r\n            <input type=\"radio\" name=\"shower\" value=\"4\" />\r\n            5\r\n            <input type=\"radio\" name=\"shower\" value=\"5\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"marginTop\">\r\n          <label >The number of Car Parking</label>\r\n          <div id=\"radio\">\r\n            1\r\n            <input type=\"radio\" name=\"car\" value=\"1\" />\r\n            2\r\n            <input type=\"radio\" name=\"car\" value=\"2\" />\r\n            3\r\n            <input type=\"radio\" name=\"car\" value=\"3\" />\r\n            4\r\n            <input type=\"radio\" name=\"car\" value=\"4\" />\r\n            5\r\n            <input type=\"radio\" name=\"car\" value=\"5\" />\r\n          </div>\r\n        </div>\r\n        <button type='submit' id=\"addPropertyBtn\">OK</button>\r\n      </form>\r\n    </>;\r\n\r\n  async function handleAddProperty(e) {\r\n    e.preventDefault();\r\n    let response = await fetch('http://localhost:3000/api/moreproperties', {\r\n\r\n    })\r\n  }\r\n\r\n  let rowsMap = rows.map(row =>\r\n\r\n    <div className=\"imgs\" key={row.id} >\r\n      <br />\r\n      <p className=\"right\">Ultimo Real Estate</p>\r\n      <br />\r\n      <a target=\"_blank\" href={\"./gallery?id=\" + row.id}>\r\n        <img src={\"static/\" + row.image_path} alt=\"Home1\"\r\n          id=\"cardImg\" />\r\n      </a>\r\n      <br />\r\n      <h5 className=\"obi\">\r\n        {row.name}\r\n        <a href=\"#\">\r\n          <img src={\"static/\" + row.agents_photo} width=\"70px;\"\r\n            height=\"70px;\" style={{ borderRadius: '50%' }} />\r\n        </a>\r\n      </h5>\r\n      <br />\r\n      <h4>{row.address}</h4>\r\n      <br />\r\n      <p className=\"icons\">\r\n        <img src=\"static/bed.png\" />{row.bed}\r\n        <img src=\"static/shower.png\" />{row.shower}\r\n        <img src=\"static/car.png\" />{row.bed}\r\n      </p>\r\n      <p className=\"inspe\">\r\n        <img src=\"static/planner.png\" /> Inspection : {row.inspection}\r\n      </p>\r\n    </div>\r\n  );\r\n\r\n\r\n  return (\r\n    <>\r\n\r\n      <MetaHead />\r\n      <div className=\"App\">\r\n        <header className='elseHeader'>\r\n          <div>\r\n            <Link href=\"/\">\r\n              <a>\r\n                <img src=\"../static/estate-logo.svg\" width=\"300\" height=\"100\"\r\n                  alt=\"Ultimo Real Estate, Sydney, Australia\" />\r\n              </a>\r\n            </Link>\r\n          </div>\r\n          <NavBar />\r\n        </header>\r\n\r\n        <main>\r\n          <div className=\"titleOfPage\">\r\n            <h1>Property of the Week</h1>\r\n          </div>\r\n\r\n          <div className=\"flex\">\r\n            <div className=\"grid-container-pro\">\r\n              {rowsMap}\r\n            </div>\r\n          </div>\r\n          <div className=\"addProperty\">\r\n              {addForm}\r\n          </div>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n\r\n    </>\r\n  )\r\n};\r\n\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}