{"ast":null,"code":"import React from 'react';\nimport queryAsync from '../mysql';\n\nfunction Index({\n  rows\n}) {\n  // let arrayOfData = rows.flatMap(row => (\n  //   [\n  //     row.address, \n  //     row.image_path, \n  //     row.inspection,\n  //     row.bed, \n  //     row.shower, \n  //     row.car, \n  //     row.name, \n  //     row.agents_photo\n  //   ]\n  // ));\n  let str = '';\n\n  for (let i = 0; i < rows.length; i++) {\n    str += `\n    <div className = \"imgs\">\n        <br>\n        <p className = \"right\">Ultimo Real Estate</p>\n        <br>\n        <a target=\"_blank\" href=\"./gallery?id=${rows[i].id}\">\n          <img src= '/static/${rows[i].image_path}' alt=\"housePicture\" \n          style={{width: \"100\", height: 242;}}>\n        </a>\n        <br>\n        <h5 className = \"obi\">${rows[i].name}\n          <a href = \"#\">\n            <img src = \"/static/${rows[i].agents_photo}\" width = \"70px;\" height=\"70px;\" style = {{border-radius: \"50\";}}>\n          </a>\n        </h5>\n        <br>\n        <h4>${rows[i].address}</h4>\n        <br>\n        <p className = \"icons\">\n          <img src = \"/static/bed.png\">${rows[i].bed}\n          <img src = \"/static/shower.png\">${rows[i].shower}\n          <img src = \"/static/car.png\">${rows[i].bed}</p>\n        <p className = \"inspe\">\n          <img src = \"/static/planner.png\"> Inspection : ${rows[i].inspection}</p>\n        <br>\n    </diV>`;\n  }\n\n  return str;\n}\n\nexport async function getServerSideProps() {\n  let dbdata = await queryAsync(`\n    SELECT property.id, property.address, property.image_path, property.inspection, \n    property.bed, property.shower, property.car, agents.name, agents.agents_photo \n    FROM property \n    JOIN agents ON property.agent_id = agents.id;\n  `);\n  console.log(\"dbdata\" + dbdata);\n  let rows = JSON.parse(JSON.stringify(dbdata));\n  console.log(\"rows\" + rows);\n  return {\n    props: {\n      rows\n    }\n  };\n}\n;\nexport default Index; // Add property feature\n// const addProperty =  async function(req, res){\n//   let address = req.body.address;\n//   let inspection = req.body.inspection;\n//   let image_path = req.body.image_path;\n//   let addName = req.body.agentName;\n//   let bed = req.body.bed;\n//   let shower = req.body.shower;\n//   let car = req.body.car;\n//   let number = parseInt(req.query.id);\n//   let rows = await dbMysql.promisifiedQuery(`SELECT * from agents WHERE name LIKE \"${addName}%\";`);\n//   let card = `\n//     <div className = \"imgs\">\n//       <br>\n//       <p className = \"right\">Ultimo Real Estate</p>\n//       <br>\n//       <a target=\"_blank\" href=\"./properties/house${number}.html\">\n//         <img src= /static/${image_path} alt=\"housePicture\" style=\"width:100%; height: 242px;\">\n//       </a><br>\n//       <h5 className = \"obi\">${rows[0].name}\n//         <a href = \"#\">\n//           <img src = \"/static/${rows[0].agents_photo}\" width = \"70px;\" height=\"70px;\" \n//           style = {{border-radius: \"50%;\"}}>\n//         </a>\n//       </h5>\n//       <br>\n//       <h4>${address}</h4><br>\n//       <p className = \"icons\">\n//         <img src = \"/static/bed.png\">${bed}\n//         <img src = \"/static/shower.png\">${shower}\n//         <img src = \"/static/car.png\">${car}\n//       </p>\n//       <p className = \"inspe\">\n//         <img src = \"/static/planner.png\"> Inspection : ${inspection}\n//       </p>\n//       <br>\n//     </diV>`;\n//   await dbMysql.promisifiedQuery(`\n//   INSERT INTO property (agent_id, address, image_path, inspection, \n//     bed, shower, car) \n//     VALUES ('${rows[0].id}','${address}', '${image_path}', '${inspection}', ${bed}, ${shower}, ${car});\n//   `);\n//   res.send (card);  \n//   res.end();\n// }","map":{"version":3,"sources":["C:/Users/shoko/src/URE3-React/ure-nextjs/pages/dbproperty.js"],"names":["React","queryAsync","Index","rows","str","i","length","id","image_path","name","agents_photo","address","bed","shower","inspection","getServerSideProps","dbdata","console","log","JSON","parse","stringify","props"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,UAAvB;;AAEA,SAASC,KAAT,CAAe;AAAEC,EAAAA;AAAF,CAAf,EAAwB;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAIC,GAAG,GAAG,EAAV;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAqC;AACnCD,IAAAA,GAAG,IAAK;;;;;gDAKoCD,IAAI,CAACE,CAAD,CAAJ,CAAQE,EAAG;+BAC5BJ,IAAI,CAACE,CAAD,CAAJ,CAAQG,UAAW;;;;gCAIlBL,IAAI,CAACE,CAAD,CAAJ,CAAQI,IAAK;;kCAEXN,IAAI,CAACE,CAAD,CAAJ,CAAQK,YAAa;;;;cAIzCP,IAAI,CAACE,CAAD,CAAJ,CAAQM,OAAQ;;;yCAGWR,IAAI,CAACE,CAAD,CAAJ,CAAQO,GAAI;4CACTT,IAAI,CAACE,CAAD,CAAJ,CAAQQ,MAAO;yCAClBV,IAAI,CAACE,CAAD,CAAJ,CAAQO,GAAI;;2DAEMT,IAAI,CAACE,CAAD,CAAJ,CAAQS,UAAW;;WAvB1E;AA0BD;;AAED,SACEV,GADF;AAID;;AAED,OAAO,eAAeW,kBAAf,GAAmC;AAExC,MAAIC,MAAM,GAAG,MAAMf,UAAU,CAAE;;;;;GAAF,CAA7B;AAOAgB,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAWF,MAAvB;AAEA,MAAIb,IAAI,GAAGgB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeL,MAAf,CAAX,CAAX;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAY,SAASf,IAArB;AAEA,SAAO;AACLmB,IAAAA,KAAK,EAAE;AACLnB,MAAAA;AADK;AADF,GAAP;AAKD;AAAA;AAED,eAAeD,KAAf,C,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React from 'react';\r\nimport queryAsync from '../mysql';\r\n\r\nfunction Index({ rows }){\r\n\r\n  // let arrayOfData = rows.flatMap(row => (\r\n  //   [\r\n  //     row.address, \r\n  //     row.image_path, \r\n  //     row.inspection,\r\n  //     row.bed, \r\n  //     row.shower, \r\n  //     row.car, \r\n  //     row.name, \r\n  //     row.agents_photo\r\n  //   ]\r\n  // ));\r\n\r\n  let str = '';\r\n  for (let i = 0; i < rows.length; i++){\r\n    str += `\r\n    <div className = \"imgs\">\r\n        <br>\r\n        <p className = \"right\">Ultimo Real Estate</p>\r\n        <br>\r\n        <a target=\"_blank\" href=\"./gallery?id=${rows[i].id}\">\r\n          <img src= '/static/${rows[i].image_path}' alt=\"housePicture\" \r\n          style={{width: \"100\", height: 242;}}>\r\n        </a>\r\n        <br>\r\n        <h5 className = \"obi\">${rows[i].name}\r\n          <a href = \"#\">\r\n            <img src = \"/static/${rows[i].agents_photo}\" width = \"70px;\" height=\"70px;\" style = {{border-radius: \"50\";}}>\r\n          </a>\r\n        </h5>\r\n        <br>\r\n        <h4>${rows[i].address}</h4>\r\n        <br>\r\n        <p className = \"icons\">\r\n          <img src = \"/static/bed.png\">${rows[i].bed}\r\n          <img src = \"/static/shower.png\">${rows[i].shower}\r\n          <img src = \"/static/car.png\">${rows[i].bed}</p>\r\n        <p className = \"inspe\">\r\n          <img src = \"/static/planner.png\"> Inspection : ${rows[i].inspection}</p>\r\n        <br>\r\n    </diV>`\r\n  }\r\n\r\n  return (\r\n    str\r\n  );\r\n  \r\n}\r\n\r\nexport async function getServerSideProps(){\r\n\r\n  let dbdata = await queryAsync(`\r\n    SELECT property.id, property.address, property.image_path, property.inspection, \r\n    property.bed, property.shower, property.car, agents.name, agents.agents_photo \r\n    FROM property \r\n    JOIN agents ON property.agent_id = agents.id;\r\n  `);\r\n\r\n  console.log(\"dbdata\" + dbdata);\r\n    \r\n  let rows = JSON.parse(JSON.stringify(dbdata));\r\n\r\n  console.log(\"rows\" + rows);\r\n\r\n  return {\r\n    props: {\r\n      rows\r\n    },\r\n  }\r\n};\r\n\r\nexport default Index;\r\n\r\n\r\n// Add property feature\r\n// const addProperty =  async function(req, res){\r\n//   let address = req.body.address;\r\n//   let inspection = req.body.inspection;\r\n//   let image_path = req.body.image_path;\r\n//   let addName = req.body.agentName;\r\n//   let bed = req.body.bed;\r\n//   let shower = req.body.shower;\r\n//   let car = req.body.car;\r\n//   let number = parseInt(req.query.id);\r\n\r\n//   let rows = await dbMysql.promisifiedQuery(`SELECT * from agents WHERE name LIKE \"${addName}%\";`);\r\n//   let card = `\r\n//     <div className = \"imgs\">\r\n//       <br>\r\n//       <p className = \"right\">Ultimo Real Estate</p>\r\n//       <br>\r\n//       <a target=\"_blank\" href=\"./properties/house${number}.html\">\r\n//         <img src= /static/${image_path} alt=\"housePicture\" style=\"width:100%; height: 242px;\">\r\n//       </a><br>\r\n//       <h5 className = \"obi\">${rows[0].name}\r\n//         <a href = \"#\">\r\n//           <img src = \"/static/${rows[0].agents_photo}\" width = \"70px;\" height=\"70px;\" \r\n//           style = {{border-radius: \"50%;\"}}>\r\n//         </a>\r\n//       </h5>\r\n//       <br>\r\n//       <h4>${address}</h4><br>\r\n//       <p className = \"icons\">\r\n//         <img src = \"/static/bed.png\">${bed}\r\n//         <img src = \"/static/shower.png\">${shower}\r\n//         <img src = \"/static/car.png\">${car}\r\n//       </p>\r\n//       <p className = \"inspe\">\r\n//         <img src = \"/static/planner.png\"> Inspection : ${inspection}\r\n//       </p>\r\n//       <br>\r\n//     </diV>`;\r\n//   await dbMysql.promisifiedQuery(`\r\n//   INSERT INTO property (agent_id, address, image_path, inspection, \r\n//     bed, shower, car) \r\n//     VALUES ('${rows[0].id}','${address}', '${image_path}', '${inspection}', ${bed}, ${shower}, ${car});\r\n//   `);\r\n//   res.send (card);  \r\n//   res.end();\r\n// }\r\n\r\n"]},"metadata":{},"sourceType":"module"}