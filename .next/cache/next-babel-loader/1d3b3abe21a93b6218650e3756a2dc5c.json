{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shoko\\\\src\\\\URE3-Next.js\\\\ure-nextjs\\\\pages\\\\properties.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport NavBar from './NavBar';\nimport MetaHead from './Head';\nimport Footer from \"./Footer\";\nimport Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport \"../style.css\";\n;\n\nfunction Index(_ref) {\n  _s();\n\n  var _this = this;\n\n  var rows = _ref.rows,\n      cookie = _ref.cookie;\n  var rowsMap = rows.map(function (row) {\n    return __jsx(\"div\", {\n      className: \"imgs\",\n      key: row.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }\n    }, __jsx(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }\n    }), __jsx(\"p\", {\n      className: \"right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }, \"Ultimo Real Estate\"), __jsx(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }), __jsx(\"a\", {\n      target: \"_blank\",\n      href: \"./gallery?id=\" + row.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }, __jsx(\"img\", {\n      src: \"static/\" + row.image_path,\n      alt: \"Home1\",\n      id: \"cardImg\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }\n    })), __jsx(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }), __jsx(\"h5\", {\n      className: \"obi\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }, row.name, __jsx(\"a\", {\n      href: \"#\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }, __jsx(\"img\", {\n      src: \"static/\" + row.agents_photo,\n      width: \"70px;\",\n      height: \"70px;\",\n      style: {\n        borderRadius: '50%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }))), __jsx(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }), __jsx(\"h4\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, row.address), __jsx(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }), __jsx(\"p\", {\n      className: \"icons\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, __jsx(\"img\", {\n      src: \"static/bed.png\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }), row.bed, __jsx(\"img\", {\n      src: \"static/shower.png\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }), row.shower, __jsx(\"img\", {\n      src: \"static/car.png\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }), row.bed), __jsx(\"p\", {\n      className: \"inspe\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, __jsx(\"img\", {\n      src: \"static/planner.png\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }), \" Inspection : \", row.inspection));\n  });\n\n  var _useState = useState([\"\"]),\n      addProperty = _useState[0],\n      setAddProperty = _useState[1];\n\n  if (cookie.role === \"agent\") {\n    setAddProperty;\n  }\n\n  console.log(cookie);\n  return __jsx(React.Fragment, null, __jsx(MetaHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, __jsx(\"header\", {\n    className: \"elseHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, __jsx(\"img\", {\n    src: \"../static/estate-logo.svg\",\n    width: \"300\",\n    height: \"100\",\n    alt: \"Ultimo Real Estate, Sydney, Australia\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  })))), __jsx(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  })), __jsx(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"titleOfPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, \"Property of the Week\")), __jsx(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"grid-container-pro\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, rowsMap), addProperty)), __jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  })));\n}\n\n_s(Index, \"zPyD1afmpJgWoUYbAzAjQ5MRmPk=\");\n\n_c = Index;\n;\nexport var __N_SSP = true;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["C:/Users/shoko/src/URE3-Next.js/ure-nextjs/pages/properties.js"],"names":["NavBar","MetaHead","Footer","Link","useState","useEffect","Index","rows","cookie","rowsMap","map","row","id","image_path","name","agents_photo","borderRadius","address","bed","shower","inspection","addProperty","setAddProperty","role","console","log"],"mappings":"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","sourcesContent":["import NavBar from './NavBar';\r\nimport MetaHead from './Head';\r\nimport Footer from \"./Footer\";\r\nimport Link from 'next/link';\r\nimport queryAsync from '../mysql';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport \"../style.css\"\r\n\r\nimport jwt from 'jsonwebtoken';\r\n\r\n\r\nasync function getProperties() {\r\n  let dbdata = await queryAsync(`\r\n  SELECT property.id, property.address, property.image_path, property.inspection, \r\n  property.bed, property.shower, property.car, agents.name, agents.agents_photo \r\n  FROM property \r\n  JOIN agents ON property.agent_id = agents.id;\r\n  `);\r\n\r\n  return JSON.parse(JSON.stringify(dbdata));\r\n}\r\n\r\nfunction checkCookies(context) {\r\n  let cookie = context.req.headers.cookie;\r\n  const regex = /logInCookie\\=([A-Za-z0-9\\.\\_\\-]+)/;\r\n  let token = cookie.match(regex)[1];\r\n  console.log(token)\r\n  let decoded;\r\n  try{\r\n    decoded = jwt.verify(token, 'ShokoDidIt');\r\n    console.log(decoded);\r\n    return decoded;\r\n  }catch{\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function getServerSideProps(context) {\r\n\r\n  let rows = await getProperties();\r\n  let cookie = checkCookies(context);\r\n\r\n  return {\r\n    props: {\r\n      rows,\r\n      cookie\r\n    },\r\n  }\r\n};\r\n\r\n\r\nfunction Index({ rows, cookie }) {\r\n  let rowsMap = rows.map(row =>\r\n\r\n    <div className=\"imgs\" key={row.id} >\r\n      <br />\r\n        <p className=\"right\">Ultimo Real Estate</p>\r\n        <br />\r\n        <a target=\"_blank\" href={\"./gallery?id=\" + row.id}>\r\n          <img src={\"static/\" + row.image_path} alt=\"Home1\" \r\n          id = \"cardImg\"/>\r\n        </a>\r\n        <br />\r\n        <h5 className = \"obi\">\r\n          {row.name}\r\n          <a href = \"#\">\r\n            <img src = {\"static/\" + row.agents_photo} width = \"70px;\" \r\n            height=\"70px;\" style = {{borderRadius: '50%'}} />\r\n          </a>\r\n        </h5>\r\n        <br />\r\n        <h4>{row.address}</h4>\r\n        <br />\r\n        <p className = \"icons\">\r\n          <img src = \"static/bed.png\" />{row.bed}\r\n          <img src = \"static/shower.png\" />{row.shower}\r\n          <img src = \"static/car.png\" />{row.bed}\r\n        </p>\r\n        <p className = \"inspe\">\r\n          <img src = \"static/planner.png\" /> Inspection : {row.inspection}\r\n        </p>\r\n    </div>\r\n  );\r\n\r\n  const [addProperty, setAddProperty] = useState([\"\"]);\r\n  if(cookie.role === \"agent\") {\r\n    setAddProperty\r\n  }\r\n  console.log(cookie);\r\n\r\n  return (\r\n    <>\r\n\r\n      <MetaHead />\r\n      <div className=\"App\">\r\n        <header className='elseHeader'>\r\n          <div>\r\n            <Link href=\"/\">\r\n              <a>\r\n                <img src=\"../static/estate-logo.svg\" width=\"300\" height=\"100\"\r\n                  alt=\"Ultimo Real Estate, Sydney, Australia\" />\r\n              </a>\r\n            </Link>\r\n          </div>\r\n          <NavBar />\r\n        </header>\r\n\r\n        <main>\r\n          <div className=\"titleOfPage\">\r\n            <h1>Property of the Week</h1>\r\n          </div>\r\n\r\n          <div className=\"flex\">\r\n            <div className=\"grid-container-pro\">\r\n              {rowsMap}\r\n            </div>\r\n              {addProperty}\r\n          </div>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n\r\n    </>\r\n  )\r\n};\r\n\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}